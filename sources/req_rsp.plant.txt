@startuml
' PlantUML source to generate sequence diagram:
' *************************
' Request and Response
' *************************
' Use with PlantUML.com's online server
' http://www.plantuml.com/plantuml/uml/SyfFKj2rKt3CoKnELR1Io4ZDoSa70000
' Paste this code in and use submit button to 
' regenerate the diagram
' PlantUML help for sequence diagram formatting is at 
' https://plantuml.com/sequence-diagram

hide footbox
skinparam sequenceMessageAlign direction
Title Request, and Response
actor Orchestrator as O
participant Broker as B
actor Consumer as C

note over C: Consumer ID is abc123\nAPs: Alpha, Iota



group Publish command to devices implementing "iota"
O -> B : PUBLISH (oc2/cmd/ap/iota, Request)
B -> O : PUBACK
B -> C : PUBLISH (oc2/cmd/ap/iota, Request)
C -> B: PUBACK
end
group Publish response from one "iota" device
C -> B : PUBLISH (oc2/rsp, Response)
B -> C : PUBACK
B -> O : PUBLISH (oc2/rsp, Response)
O -> B : PUBACK
end
@enduml